<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .summary-card.total-sales {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .summary-card.total-items {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .summary-card h3 {
            font-size: 1em;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .summary-card .value {
            font-size: 2.5em;
            font-weight: bold;
        }

        .section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-control {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 5px;
            color: #555;
            font-weight: 600;
        }

        input, select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        button:active {
            transform: translateY(0);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        .stock-low {
            color: #f5576c;
            font-weight: bold;
        }

        .stock-ok {
            color: #43e97b;
            font-weight: bold;
        }

        .delete-btn {
            background: linear-gradient(135deg, #f5576c 0%, #ff6b6b 100%);
            padding: 8px 15px;
            font-size: 0.9em;
            box-shadow: 0 2px 10px rgba(245, 87, 108, 0.4);
        }

        .date-filter {
            display: flex;
            gap: 10px;
            align-items: flex-end;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .summary-card .value {
                font-size: 2em;
            }

            table {
                font-size: 0.9em;
            }

            th, td {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè™ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h1>
            <p>‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
        </div>

        <div class="content">
            <!-- Summary Cards -->
            <div class="summary-cards">
                <div class="summary-card total-sales">
                    <h3>üí∞ ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
                    <div class="value" id="todaySales">‡∏ø0</div>
                </div>
                <div class="summary-card total-items">
                    <h3>üì¶ ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                    <div class="value" id="totalStock">0</div>
                </div>
                <div class="summary-card">
                    <h3>üõçÔ∏è ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
                    <div class="value" id="todayTransactions">0</div>
                </div>
            </div>

            <!-- Product Stock Management -->
            <div class="section">
                <h2>üìä ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                <table id="stockTable">
                    <thead>
                        <tr>
                            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ø)</th>
                            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</th>
                            <th>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody id="stockTableBody">
                    </tbody>
                </table>
            </div>

            <!-- Add Sale -->
            <div class="section">
                <h2>üõí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</h2>
                <form id="saleForm">
                    <div class="form-group">
                        <div class="form-control">
                            <label for="productSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                            <select id="productSelect" required>
                                <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ --</option>
                            </select>
                        </div>
                        <div class="form-control">
                            <label for="quantity">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢</label>
                            <input type="number" id="quantity" min="1" required>
                        </div>
                        <div class="form-control">
                            <label for="saleDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢</label>
                            <input type="date" id="saleDate" required>
                        </div>
                    </div>
                    <button type="submit">‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</button>
                </form>
            </div>

            <!-- Sales History -->
            <div class="section">
                <h2>üìã ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</h2>
                <div class="date-filter">
                    <div class="form-control">
                        <label for="filterDate">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                        <input type="date" id="filterDate">
                    </div>
                    <button onclick="filterSales()">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
                    <button onclick="clearFilter()">üîÑ ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                </div>
                <br>
                <table id="salesTable">
                    <thead>
                        <tr>
                            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                            <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                            <th>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢ (‡∏ø)</th>
                            <th>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° (‡∏ø)</th>
                            <th>‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody id="salesTableBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Initialize products with default data
        let products = [
            { id: 1, name: "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A", price: 100, stock: 0 },
            { id: 2, name: "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ B", price: 150, stock: 0 },
            { id: 3, name: "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ C", price: 200, stock: 0 },
            { id: 4, name: "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ D", price: 120, stock: 0 },
            { id: 5, name: "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ E", price: 180, stock: 0 }
        ];

        let sales = [];

        // Load data from localStorage if available
        function loadData() {
            const savedProducts = localStorage.getItem('products');
            const savedSales = localStorage.getItem('sales');
            
            if (savedProducts) {
                products = JSON.parse(savedProducts);
            }
            if (savedSales) {
                sales = JSON.parse(savedSales);
            }
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('products', JSON.stringify(products));
            localStorage.setItem('sales', JSON.stringify(sales));
        }

        // Set today's date as default
        document.getElementById('saleDate').valueAsDate = new Date();

        // Render stock table
        function renderStockTable() {
            const tbody = document.getElementById('stockTableBody');
            tbody.innerHTML = '';
            
            products.forEach(product => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${product.name}</td>
                    <td>‡∏ø${product.price.toLocaleString()}</td>
                    <td class="${product.stock < 20 ? 'stock-low' : 'stock-ok'}">
                        ${product.stock} ${product.stock < 20 ? '‚ö†Ô∏è ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏ï‡πà‡∏≥' : '‚úÖ'}
                    </td>
                    <td>
                        <button onclick="addStock(${product.id})">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ï‡πá‡∏≠‡∏Å</button>
                        <button onclick="editProduct(${product.id})">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                    </td>
                `;
            });

            updateProductSelect();
            updateSummary();
        }

        // Update product select dropdown
        function updateProductSelect() {
            const select = document.getElementById('productSelect');
            select.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ --</option>';
            
            products.forEach(product => {
                const option = document.createElement('option');
                option.value = product.id;
                option.textContent = `${product.name} (‡∏ø${product.price}) - ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${product.stock}`;
                if (product.stock === 0) {
                    option.disabled = true;
                    option.textContent += ' [‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î]';
                }
                select.appendChild(option);
            });
        }

        // Add stock to product
        function addStock(productId) {
            const product = products.find(p => p.id === productId);
            const amount = prompt(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ${product.name}\n‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°:`, '10');
            
            if (amount && !isNaN(amount) && parseInt(amount) > 0) {
                product.stock += parseInt(amount);
                saveData();
                renderStockTable();
                alert(`‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ï‡πá‡∏≠‡∏Å ${product.name} ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${amount} ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÅ‡∏•‡πâ‡∏ß`);
            }
        }

        // Edit product
        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            const newName = prompt('‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:', product.name);
            if (newName) product.name = newName;
            
            const newPrice = prompt('‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ø):', product.price);
            if (newPrice && !isNaN(newPrice) && parseFloat(newPrice) > 0) {
                product.price = parseFloat(newPrice);
            }
            
            saveData();
            renderStockTable();
            renderSalesTable();
        }

        // Handle sale form submission
        document.getElementById('saleForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const productId = parseInt(document.getElementById('productSelect').value);
            const quantity = parseInt(document.getElementById('quantity').value);
            const saleDate = document.getElementById('saleDate').value;
            
            const product = products.find(p => p.id === productId);
            
            if (!product) {
                alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤');
                return;
            }
            
            if (quantity > product.stock) {
                alert(`‚ùå ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠! ‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏û‡∏µ‡∏¢‡∏á ${product.stock} ‡∏´‡∏ô‡πà‡∏ß‡∏¢`);
                return;
            }
            
            // Add sale
            const sale = {
                id: Date.now(),
                productId: product.id,
                productName: product.name,
                quantity: quantity,
                price: product.price,
                total: quantity * product.price,
                date: saleDate
            };
            
            sales.push(sale);
            product.stock -= quantity;
            
            saveData();
            renderStockTable();
            renderSalesTable();
            
            // Reset form
            this.reset();
            document.getElementById('saleDate').valueAsDate = new Date();
            
            alert(`‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\n‡∏Ç‡∏≤‡∏¢ ${product.name} ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${quantity} ‡∏´‡∏ô‡πà‡∏ß‡∏¢\n‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° ‡∏ø${sale.total.toLocaleString()}`);
        });

        // Render sales table
        function renderSalesTable(filteredSales = null) {
            const tbody = document.getElementById('salesTableBody');
            tbody.innerHTML = '';
            
            const salesToShow = filteredSales || sales;
            const sortedSales = [...salesToShow].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (sortedSales.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align:center;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</td></tr>';
                return;
            }
            
            sortedSales.forEach(sale => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${new Date(sale.date).toLocaleDateString('th-TH')}</td>
                    <td>${sale.productName}</td>
                    <td>${sale.quantity}</td>
                    <td>‡∏ø${sale.price.toLocaleString()}</td>
                    <td><strong>‡∏ø${sale.total.toLocaleString()}</strong></td>
                    <td><button class="delete-btn" onclick="deleteSale(${sale.id})">üóëÔ∏è ‡∏•‡∏ö</button></td>
                `;
            });
        }

        // Delete sale
        function deleteSale(saleId) {
            if (!confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) return;
            
            const sale = sales.find(s => s.id === saleId);
            const product = products.find(p => p.id === sale.productId);
            
            // Return stock
            if (product) {
                product.stock += sale.quantity;
            }
            
            // Remove sale
            sales = sales.filter(s => s.id !== saleId);
            
            saveData();
            renderStockTable();
            renderSalesTable();
            alert('‚úÖ ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß');
        }

        // Update summary
        function updateSummary() {
            const today = new Date().toISOString().split('T')[0];
            const todaySales = sales.filter(s => s.date === today);
            
            const todayTotal = todaySales.reduce((sum, sale) => sum + sale.total, 0);
            const totalStock = products.reduce((sum, product) => sum + product.stock, 0);
            
            document.getElementById('todaySales').textContent = `‡∏ø${todayTotal.toLocaleString()}`;
            document.getElementById('totalStock').textContent = totalStock.toLocaleString();
            document.getElementById('todayTransactions').textContent = todaySales.length;
        }

        // Filter sales by date
        function filterSales() {
            const filterDate = document.getElementById('filterDate').value;
            if (!filterDate) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà');
                return;
            }
            
            const filtered = sales.filter(s => s.date === filterDate);
            renderSalesTable(filtered);
        }

        // Clear filter
        function clearFilter() {
            document.getElementById('filterDate').value = '';
            renderSalesTable();
        }

        // Initialize
        loadData();
        renderStockTable();
        renderSalesTable();
    </script>
</body>

</html>
